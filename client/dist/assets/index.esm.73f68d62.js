import{S as ut,s as lt,g as at,n as We,p as ot,e as ct,b as le,h as ft,i as dt,R as K}from"./index.98e253f8.js";class yt extends ut{constructor(r,t){super(),this.client=r,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){const t=this.options;this.options=this.client.defaultMutationOptions(r),lt(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var r;(r=this.currentMutation)==null||r.removeObserver(this)}}onMutationUpdate(r){this.updateResult();const t={listeners:!0};r.type==="success"?t.onSuccess=!0:r.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(r,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof r<"u"?r:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const r=this.currentMutation?this.currentMutation.state:at(),t={...r,isLoading:r.status==="loading",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(r){We.batch(()=>{if(this.mutateOptions){if(r.onSuccess){var t,l,u,a;(t=(l=this.mutateOptions).onSuccess)==null||t.call(l,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(u=(a=this.mutateOptions).onSettled)==null||u.call(a,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(r.onError){var h,g,x,m;(h=(g=this.mutateOptions).onError)==null||h.call(g,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(x=(m=this.mutateOptions).onSettled)==null||x.call(m,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}r.listeners&&this.listeners.forEach(O=>{O(this.currentResult)})})}}function Ut(e,r,t){const l=ot(e,r,t),u=ct({context:l.context}),[a]=le.exports.useState(()=>new yt(u,l));le.exports.useEffect(()=>{a.setOptions(l)},[a,l]);const h=ft(le.exports.useCallback(x=>a.subscribe(We.batchCalls(x)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),g=le.exports.useCallback((x,m)=>{a.mutate(x,m).catch(ht)},[a]);if(h.error&&dt(a.options.useErrorBoundary,[h.error]))throw h.error;return{...h,mutate:g,mutateAsync:h.mutate}}function ht(){}var te=e=>e.type==="checkbox",X=e=>e instanceof Date,R=e=>e==null;const Ke=e=>typeof e=="object";var D=e=>!R(e)&&!Array.isArray(e)&&Ke(e)&&!X(e),gt=e=>D(e)&&e.target?te(e.target)?e.target.checked:e.target.value:e,vt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,bt=(e,r)=>e.has(vt(r)),re=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,f=(e,r,t)=>{if(!r||!D(e))return t;const l=re(r.split(/[,[\].]+?/)).reduce((u,a)=>R(u)?u:u[a],e);return k(l)||l===e?k(e[r])?t:e[r]:l};const Le={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},N={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};K.createContext(null);var At=(e,r,t,l=!0)=>{const u={};for(const a in e)Object.defineProperty(u,a,{get:()=>{const h=a;return r[h]!==N.all&&(r[h]=!l||N.all),t&&(t[h]=!0),e[h]}});return u},C=e=>D(e)&&!Object.keys(e).length,xt=(e,r,t)=>{const{name:l,...u}=e;return C(u)||Object.keys(u).length>=Object.keys(r).length||Object.keys(u).find(a=>r[a]===(!t||N.all))},Ae=e=>Array.isArray(e)?e:[e];function wt(e){const r=K.useRef(e);r.current=e,K.useEffect(()=>{const t=u=>{u&&u.unsubscribe()},l=!e.disabled&&r.current.subject.subscribe({next:r.current.callback});return()=>t(l)},[e.disabled])}var B=e=>typeof e=="string",Ft=(e,r,t,l)=>{const u=Array.isArray(e);return B(e)?(l&&r.watch.add(e),f(t,e)):u?e.map(a=>(l&&r.watch.add(a),f(t,a))):(l&&(r.watchAll=!0),t)},ee=e=>typeof e=="function",je=e=>{for(const r in e)if(ee(e[r]))return!0;return!1},_t=(e,r,t,l,u)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[l]:u||!0}}:{},Se=e=>/^\w*$/.test(e),Qe=e=>re(e.replace(/["|']|\]/g,"").split(/\.|\[/));function w(e,r,t){let l=-1;const u=Se(r)?[r]:Qe(r),a=u.length,h=a-1;for(;++l<a;){const g=u[l];let x=t;if(l!==h){const m=e[g];x=D(m)||Array.isArray(m)?m:isNaN(+u[l+1])?{}:[]}e[g]=x,e=e[g]}return e}const me=(e,r,t)=>{for(const l of t||Object.keys(e)){const u=f(e,l);if(u){const{_f:a,...h}=u;if(a&&r(a.name)){if(a.ref.focus&&k(a.ref.focus()))break;if(a.refs){a.refs[0].focus();break}}else D(h)&&me(h,r)}}};var Te=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(l=>e.startsWith(l)&&/^\.\w+/.test(e.slice(l.length)))),mt=(e,r,t)=>{const l=re(f(e,t));return w(l,"root",r[t]),w(e,t,l),e},oe=e=>typeof e=="boolean",De=e=>e.type==="file",ae=e=>B(e)||K.isValidElement(e),Ee=e=>e.type==="radio",ce=e=>e instanceof RegExp;const Ue={value:!1,isValid:!1},Ne={value:!0,isValid:!0};var ze=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?Ne:{value:e[0].value,isValid:!0}:Ne:Ue}return Ue};const Be={isValid:!1,value:null};var Ge=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,Be):Be;function Pe(e,r,t="validate"){if(ae(e)||Array.isArray(e)&&e.every(ae)||oe(e)&&!e)return{type:t,message:ae(e)?e:"",ref:r}}var J=e=>D(e)&&!ce(e)?e:{value:e,message:""},Ie=async(e,r,t,l,u)=>{const{ref:a,refs:h,required:g,maxLength:x,minLength:m,min:O,max:F,pattern:b,validate:H,name:L,valueAsNumber:se,mount:ye,disabled:W}=e._f;if(!ye||W)return{};const P=h?h[0]:a,I=v=>{l&&P.reportValidity&&(P.setCustomValidity(oe(v)?"":v||" "),P.reportValidity())},V={},Z=Ee(a),ie=te(a),j=Z||ie,G=(se||De(a))&&!a.value||r===""||Array.isArray(r)&&!r.length,T=_t.bind(null,L,t,V),ne=(v,A,S,M=q.maxLength,U=q.minLength)=>{const Q=v?A:S;V[L]={type:v?M:U,message:Q,ref:a,...T(v?M:U,Q)}};if(u?!Array.isArray(r)||!r.length:g&&(!j&&(G||R(r))||oe(r)&&!r||ie&&!ze(h).isValid||Z&&!Ge(h).isValid)){const{value:v,message:A}=ae(g)?{value:!!g,message:g}:J(g);if(v&&(V[L]={type:q.required,message:A,ref:P,...T(q.required,A)},!t))return I(A),V}if(!G&&(!R(O)||!R(F))){let v,A;const S=J(F),M=J(O);if(!R(r)&&!isNaN(r)){const U=a.valueAsNumber||r&&+r;R(S.value)||(v=U>S.value),R(M.value)||(A=U<M.value)}else{const U=a.valueAsDate||new Date(r);B(S.value)&&(v=U>new Date(S.value)),B(M.value)&&(A=U<new Date(M.value))}if((v||A)&&(ne(!!v,S.message,M.message,q.max,q.min),!t))return I(V[L].message),V}if((x||m)&&!G&&(B(r)||u&&Array.isArray(r))){const v=J(x),A=J(m),S=!R(v.value)&&r.length>v.value,M=!R(A.value)&&r.length<A.value;if((S||M)&&(ne(S,v.message,A.message),!t))return I(V[L].message),V}if(b&&!G&&B(r)){const{value:v,message:A}=J(b);if(ce(v)&&!r.match(v)&&(V[L]={type:q.pattern,message:A,ref:a,...T(q.pattern,A)},!t))return I(A),V}if(H){if(ee(H)){const v=await H(r),A=Pe(v,P);if(A&&(V[L]={...A,...T(q.validate,A.message)},!t))return I(A.message),V}else if(D(H)){let v={};for(const A in H){if(!C(v)&&!t)break;const S=Pe(await H[A](r),P,A);S&&(v={...S,...T(A,S.message)},I(S.message),t&&(V[L]=v))}if(!C(v)&&(V[L]={ref:P,...v},!t))return V}}return I(!0),V},Ve=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function z(e){let r;const t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Ve&&(e instanceof Blob||e instanceof FileList))&&(t||D(e))){r=t?[]:{};for(const l in e){if(ee(e[l])){r=e;break}r[l]=z(e[l])}}else return e;return r}var qe=e=>({isOnSubmit:!e||e===N.onSubmit,isOnBlur:e===N.onBlur,isOnChange:e===N.onChange,isOnAll:e===N.all,isOnTouch:e===N.onTouched});function Vt(e,r){const t=r.slice(0,-1).length;let l=0;for(;l<t;)e=k(e)?l++:e[r[l++]];return e}function kt(e){for(const r in e)if(!k(e[r]))return!1;return!0}function E(e,r){const t=Se(r)?[r]:Qe(r),l=t.length==1?e:Vt(e,t),u=t[t.length-1];let a;l&&delete l[u];for(let h=0;h<t.slice(0,-1).length;h++){let g=-1,x;const m=t.slice(0,-(h+1)),O=m.length-1;for(h>0&&(a=e);++g<m.length;){const F=m[g];x=x?x[F]:e[F],O===g&&(D(x)&&C(x)||Array.isArray(x)&&kt(x))&&(a?delete a[F]:delete e[F]),a=x}}return e}function xe(){let e=[];return{get observers(){return e},next:u=>{for(const a of e)a.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(a=>a!==u)}}),unsubscribe:()=>{e=[]}}}var fe=e=>R(e)||!Ke(e);function Y(e,r){if(fe(e)||fe(r))return e===r;if(X(e)&&X(r))return e.getTime()===r.getTime();const t=Object.keys(e),l=Object.keys(r);if(t.length!==l.length)return!1;for(const u of t){const a=e[u];if(!l.includes(u))return!1;if(u!=="ref"){const h=r[u];if(X(a)&&X(h)||D(a)&&D(h)||Array.isArray(a)&&Array.isArray(h)?!Y(a,h):a!==h)return!1}}return!0}var ke=e=>{const r=e?e.ownerDocument:0,t=r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement;return e instanceof t},Je=e=>e.type==="select-multiple",St=e=>Ee(e)||te(e),we=e=>ke(e)&&e.isConnected;function de(e,r={}){const t=Array.isArray(e);if(D(e)||t)for(const l in e)Array.isArray(e[l])||D(e[l])&&!je(e[l])?(r[l]=Array.isArray(e[l])?[]:{},de(e[l],r[l])):R(e[l])||(r[l]=!0);return r}function Xe(e,r,t){const l=Array.isArray(e);if(D(e)||l)for(const u in e)Array.isArray(e[u])||D(e[u])&&!je(e[u])?k(r)||fe(t[u])?t[u]=Array.isArray(e[u])?de(e[u],[]):{...de(e[u])}:Xe(e[u],R(r)?{}:r[u],t[u]):t[u]=!Y(e[u],r[u]);return t}var Fe=(e,r)=>Xe(e,r,de(r)),Ye=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:l})=>k(e)?e:r?e===""?NaN:e&&+e:t&&B(e)?new Date(e):l?l(e):e;function _e(e){const r=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):r.disabled))return De(r)?r.files:Ee(r)?Ge(e.refs).value:Je(r)?[...r.selectedOptions].map(({value:t})=>t):te(r)?ze(e.refs).value:Ye(k(r.value)?e.ref.value:r.value,e)}var Dt=(e,r,t,l)=>{const u={};for(const a of e){const h=f(r,a);h&&w(u,a,h._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:l}},$=e=>k(e)?void 0:ce(e)?e.source:D(e)?ce(e.value)?e.value.source:e.value:e,Et=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function He(e,r,t){const l=f(e,t);if(l||Se(t))return{error:l,name:t};const u=t.split(".");for(;u.length;){const a=u.join("."),h=f(r,a),g=f(e,a);if(h&&!Array.isArray(h)&&t!==a)return{name:t};if(g&&g.type)return{name:a,error:g};u.pop()}return{name:t}}var Rt=(e,r,t,l,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(r||e):(t?l.isOnBlur:u.isOnBlur)?!e:(t?l.isOnChange:u.isOnChange)?e:!0,Mt=(e,r)=>!re(f(e,r)).length&&E(e,r);const pt={mode:N.onSubmit,reValidateMode:N.onChange,shouldFocusError:!0};function Ot(e={}){let r={...pt,...e},t={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},l={},u=z(r.defaultValues)||{},a=r.shouldUnregister?{}:z(u),h={action:!1,mount:!1,watch:!1},g={mount:new Set,unMount:new Set,array:new Set,watch:new Set},x,m=0,O={};const F={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={watch:xe(),array:xe(),state:xe()},H=qe(r.mode),L=qe(r.reValidateMode),se=r.criteriaMode===N.all,ye=s=>i=>{clearTimeout(m),m=window.setTimeout(s,i)},W=async s=>{let i=!1;return F.isValid&&(i=r.resolver?C((await j()).errors):await T(l,!0),!s&&i!==t.isValid&&(t.isValid=i,b.state.next({isValid:i}))),i},P=(s,i=[],n,c,d=!0,o=!0)=>{if(c&&n){if(h.action=!0,o&&Array.isArray(f(l,s))){const y=n(f(l,s),c.argA,c.argB);d&&w(l,s,y)}if(F.errors&&o&&Array.isArray(f(t.errors,s))){const y=n(f(t.errors,s),c.argA,c.argB);d&&w(t.errors,s,y),Mt(t.errors,s)}if(F.touchedFields&&o&&Array.isArray(f(t.touchedFields,s))){const y=n(f(t.touchedFields,s),c.argA,c.argB);d&&w(t.touchedFields,s,y)}F.dirtyFields&&(t.dirtyFields=Fe(u,a)),b.state.next({isDirty:v(s,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else w(a,s,i)},I=(s,i)=>{w(t.errors,s,i),b.state.next({errors:t.errors})},V=(s,i,n,c)=>{const d=f(l,s);if(d){const o=f(a,s,k(n)?f(u,s):n);k(o)||c&&c.defaultChecked||i?w(a,s,i?o:_e(d._f)):M(s,o),h.mount&&W()}},Z=(s,i,n,c,d)=>{let o=!1;const y={name:s},_=f(t.touchedFields,s);if(F.isDirty){const p=t.isDirty;t.isDirty=y.isDirty=v(),o=p!==y.isDirty}if(F.dirtyFields&&(!n||c)){const p=f(t.dirtyFields,s);Y(f(u,s),i)?E(t.dirtyFields,s):w(t.dirtyFields,s,!0),y.dirtyFields=t.dirtyFields,o=o||p!==f(t.dirtyFields,s)}return n&&!_&&(w(t.touchedFields,s,n),y.touchedFields=t.touchedFields,o=o||F.touchedFields&&_!==n),o&&d&&b.state.next(y),o?y:{}},ie=async(s,i,n,c)=>{const d=f(t.errors,s),o=F.isValid&&t.isValid!==i;if(e.delayError&&n?(x=ye(()=>I(s,n)),x(e.delayError)):(clearTimeout(m),x=null,n?w(t.errors,s,n):E(t.errors,s)),(n?!Y(d,n):d)||!C(c)||o){const y={...c,...o?{isValid:i}:{},errors:t.errors,name:s};t={...t,...y},b.state.next(y)}O[s]--,F.isValidating&&!Object.values(O).some(y=>y)&&(b.state.next({isValidating:!1}),O={})},j=async s=>r.resolver?await r.resolver({...a},r.context,Dt(s||g.mount,l,r.criteriaMode,r.shouldUseNativeValidation)):{},G=async s=>{const{errors:i}=await j();if(s)for(const n of s){const c=f(i,n);c?w(t.errors,n,c):E(t.errors,n)}else t.errors=i;return i},T=async(s,i,n={valid:!0})=>{for(const c in s){const d=s[c];if(d){const{_f:o,...y}=d;if(o){const _=g.array.has(o.name),p=await Ie(d,f(a,o.name),se,r.shouldUseNativeValidation,_);if(p[o.name]&&(n.valid=!1,i))break;!i&&(f(p,o.name)?_?mt(t.errors,p,o.name):w(t.errors,o.name,p[o.name]):E(t.errors,o.name))}y&&await T(y,i,n)}}return n.valid},ne=()=>{for(const s of g.unMount){const i=f(l,s);i&&(i._f.refs?i._f.refs.every(n=>!we(n)):!we(i._f.ref))&&ge(s)}g.unMount=new Set},v=(s,i)=>(s&&i&&w(a,s,i),!Y(Me(),u)),A=(s,i,n)=>{const c={...h.mount?a:k(i)?u:B(s)?{[s]:i}:i};return Ft(s,g,c,n)},S=s=>re(f(h.mount?a:u,s,e.shouldUnregister?f(u,s,[]):[])),M=(s,i,n={})=>{const c=f(l,s);let d=i;if(c){const o=c._f;o&&(!o.disabled&&w(a,s,Ye(i,o)),d=Ve&&ke(o.ref)&&R(i)?"":i,Je(o.ref)?[...o.ref.options].forEach(y=>y.selected=d.includes(y.value)):o.refs?te(o.ref)?o.refs.length>1?o.refs.forEach(y=>!y.disabled&&(y.checked=Array.isArray(d)?!!d.find(_=>_===y.value):d===y.value)):o.refs[0]&&(o.refs[0].checked=!!d):o.refs.forEach(y=>y.checked=y.value===d):De(o.ref)?o.ref.value="":(o.ref.value=d,o.ref.type||b.watch.next({name:s})))}(n.shouldDirty||n.shouldTouch)&&Z(s,d,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&he(s)},U=(s,i,n)=>{for(const c in i){const d=i[c],o=`${s}.${c}`,y=f(l,o);(g.array.has(s)||!fe(d)||y&&!y._f)&&!X(d)?U(o,d,n):M(o,d,n)}},Q=(s,i,n={})=>{const c=f(l,s),d=g.array.has(s),o=z(i);w(a,s,o),d?(b.array.next({name:s,values:a}),(F.isDirty||F.dirtyFields)&&n.shouldDirty&&(t.dirtyFields=Fe(u,a),b.state.next({name:s,dirtyFields:t.dirtyFields,isDirty:v(s,o)}))):c&&!c._f&&!R(o)?U(s,o,n):M(s,o,n),Te(s,g)&&b.state.next({}),b.watch.next({name:s})},Re=async s=>{const i=s.target;let n=i.name;const c=f(l,n);if(c){let d,o;const y=i.type?_e(c._f):gt(s),_=s.type===Le.BLUR||s.type===Le.FOCUS_OUT,p=!Et(c._f)&&!r.resolver&&!f(t.errors,n)&&!c._f.deps||Rt(_,f(t.touchedFields,n),t.isSubmitted,L,H),ue=Te(n,g,_);w(a,n,y),_?(c._f.onBlur&&c._f.onBlur(s),x&&x(0)):c._f.onChange&&c._f.onChange(s);const be=Z(n,y,_,!1),it=!C(be)||ue;if(!_&&b.watch.next({name:n,type:s.type}),p)return it&&b.state.next({name:n,...ue?{}:be});if(!_&&ue&&b.state.next({}),O[n]=(O[n],1),b.state.next({isValidating:!0}),r.resolver){const{errors:Oe}=await j([n]),nt=He(t.errors,l,n),Ce=He(Oe,l,nt.name||n);d=Ce.error,n=Ce.name,o=C(Oe)}else d=(await Ie(c,f(a,n),se,r.shouldUseNativeValidation))[n],o=await W(!0);c._f.deps&&he(c._f.deps),ie(n,o,d,be)}},he=async(s,i={})=>{let n,c;const d=Ae(s);if(b.state.next({isValidating:!0}),r.resolver){const o=await G(k(s)?s:d);n=C(o),c=s?!d.some(y=>f(o,y)):n}else s?(c=(await Promise.all(d.map(async o=>{const y=f(l,o);return await T(y&&y._f?{[o]:y}:y)}))).every(Boolean),!(!c&&!t.isValid)&&W()):c=n=await T(l);return b.state.next({...!B(s)||F.isValid&&n!==t.isValid?{}:{name:s},...r.resolver?{isValid:n}:{},errors:t.errors,isValidating:!1}),i.shouldFocus&&!c&&me(l,o=>f(t.errors,o),s?d:g.mount),c},Me=s=>{const i={...u,...h.mount?a:{}};return k(s)?i:B(s)?f(i,s):s.map(n=>f(i,n))},pe=(s,i)=>({invalid:!!f((i||t).errors,s),isDirty:!!f((i||t).dirtyFields,s),isTouched:!!f((i||t).touchedFields,s),error:f((i||t).errors,s)}),Ze=s=>{s?Ae(s).forEach(i=>E(t.errors,i)):t.errors={},b.state.next({errors:t.errors})},$e=(s,i,n)=>{const c=(f(l,s,{_f:{}})._f||{}).ref;w(t.errors,s,{...i,ref:c}),b.state.next({name:s,errors:t.errors,isValid:!1}),n&&n.shouldFocus&&c&&c.focus&&c.focus()},et=(s,i)=>ee(s)?b.watch.subscribe({next:n=>s(A(void 0,i),n)}):A(s,i,!0),ge=(s,i={})=>{for(const n of s?Ae(s):g.mount)g.mount.delete(n),g.array.delete(n),f(l,n)&&(i.keepValue||(E(l,n),E(a,n)),!i.keepError&&E(t.errors,n),!i.keepDirty&&E(t.dirtyFields,n),!i.keepTouched&&E(t.touchedFields,n),!r.shouldUnregister&&!i.keepDefaultValue&&E(u,n));b.watch.next({}),b.state.next({...t,...i.keepDirty?{isDirty:v()}:{}}),!i.keepIsValid&&W()},ve=(s,i={})=>{let n=f(l,s);const c=oe(i.disabled);return w(l,s,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:s}},name:s,mount:!0,...i}}),g.mount.add(s),n?c&&w(a,s,i.disabled?void 0:f(a,s,_e(n._f))):V(s,!0,i.value),{...c?{disabled:i.disabled}:{},...r.shouldUseNativeValidation?{required:!!i.required,min:$(i.min),max:$(i.max),minLength:$(i.minLength),maxLength:$(i.maxLength),pattern:$(i.pattern)}:{},name:s,onChange:Re,onBlur:Re,ref:d=>{if(d){ve(s,i),n=f(l,s);const o=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,y=St(o),_=n._f.refs||[];if(y?_.find(p=>p===o):o===n._f.ref)return;w(l,s,{_f:{...n._f,...y?{refs:[..._.filter(we),o,...Array.isArray(f(u,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),V(s,!1,void 0,o)}else n=f(l,s,{}),n._f&&(n._f.mount=!1),(r.shouldUnregister||i.shouldUnregister)&&!(bt(g.array,s)&&h.action)&&g.unMount.add(s)}}},tt=(s,i)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let c=!0,d=z(a);b.state.next({isSubmitting:!0});try{if(r.resolver){const{errors:o,values:y}=await j();t.errors=o,d=y}else await T(l);C(t.errors)?(b.state.next({errors:{},isSubmitting:!0}),await s(d,n)):(i&&await i({...t.errors},n),r.shouldFocusError&&me(l,o=>f(t.errors,o),g.mount))}catch(o){throw c=!1,o}finally{t.isSubmitted=!0,b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:C(t.errors)&&c,submitCount:t.submitCount+1,errors:t.errors})}},rt=(s,i={})=>{f(l,s)&&(k(i.defaultValue)?Q(s,f(u,s)):(Q(s,i.defaultValue),w(u,s,i.defaultValue)),i.keepTouched||E(t.touchedFields,s),i.keepDirty||(E(t.dirtyFields,s),t.isDirty=i.defaultValue?v(s,f(u,s)):v()),i.keepError||(E(t.errors,s),F.isValid&&W()),b.state.next({...t}))},st=(s,i={})=>{const n=s||u,c=z(n),d=s&&!C(s)?c:u;if(i.keepDefaultValues||(u=n),!i.keepValues){if(i.keepDirtyValues)for(const o of g.mount)f(t.dirtyFields,o)?w(d,o,f(a,o)):Q(o,f(d,o));else{if(Ve&&k(s))for(const o of g.mount){const y=f(l,o);if(y&&y._f){const _=Array.isArray(y._f.refs)?y._f.refs[0]:y._f.ref;try{if(ke(_)){_.closest("form").reset();break}}catch{}}}l={}}a=e.shouldUnregister?i.keepDefaultValues?z(u):{}:c,b.array.next({values:d}),b.watch.next({values:d})}g={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!F.isValid||!!i.keepIsValid,h.watch=!!e.shouldUnregister,b.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:i.keepDirty||i.keepDirtyValues?t.isDirty:!!(i.keepDefaultValues&&!Y(s,u)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:i.keepDirty||i.keepDirtyValues?t.dirtyFields:i.keepDefaultValues&&s?Fe(u,s):{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:ve,unregister:ge,getFieldState:pe,_executeSchema:j,_getWatch:A,_getDirty:v,_updateValid:W,_removeUnmounted:ne,_updateFieldArray:P,_getFieldArray:S,_subjects:b,_proxyFormState:F,get _fields(){return l},get _formValues(){return a},get _stateFlags(){return h},set _stateFlags(s){h=s},get _defaultValues(){return u},get _names(){return g},set _names(s){g=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:he,register:ve,handleSubmit:tt,watch:et,setValue:Q,getValues:Me,reset:(s,i)=>st(ee(s)?s(a):s,i),resetField:rt,clearErrors:Ze,unregister:ge,setError:$e,setFocus:(s,i={})=>{const n=f(l,s)._f,c=n.refs?n.refs[0]:n.ref;c.focus(),i.shouldSelect&&c.select()},getFieldState:pe}}function Nt(e={}){const r=K.useRef(),[t,l]=K.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});r.current?r.current.control._options=e:r.current={...Ot(e),formState:t};const u=r.current.control,a=K.useCallback(h=>{xt(h,u._proxyFormState,!0)&&(u._formState={...u._formState,...h},l({...u._formState}))},[u]);return wt({subject:u._subjects.state,callback:a}),K.useEffect(()=>{u._stateFlags.mount||(u._proxyFormState.isValid&&u._updateValid(),u._stateFlags.mount=!0),u._stateFlags.watch&&(u._stateFlags.watch=!1,u._subjects.state.next({})),u._removeUnmounted()}),r.current.formState=At(t,u._proxyFormState),r.current}export{Ut as a,Nt as u};
