import{r as u,j as e,a as l,L as v,B as F,b as r,_ as b,u as P,c as N,f as I,q as L}from"./index.98e253f8.js";import{S}from"./SuspenseWrapper.28cf0a96.js";import{f as z,a as C}from"./PostApi.782cad32.js";import{B as k}from"./Button.769d98f0.js";import{C as A}from"./compressor.esm.c4e5fc50.js";import{u as E,a as B}from"./index.esm.73f68d62.js";var G=u.GenIcon,M=function(t){return G({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"}}]})(t)},T=u.GenIcon,U=function(t){return T({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5 375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]})(t)};function D(){return e("aside",{className:" md:w-[280px] lg:sticky  lg:top-[80px] flex-1 lg:flex-initial  flex flex-col items-start justify-start   md:items-center mt-5 md:mt-20  lg:min-h-[80vh] min-h-auto my-10 lg:my-1  mx-2",children:e("div",{className:"w-full shadow-box	rounded-md py-1 bg-white  flex flex-column justify-center  flex-wrap items-center min-h-[200px]",children:l("ul",{className:"w-full  max-w-[80%]   flex flex-col justify-start items-start flex-wrap gap-3",children:[l("li",{className:"p-2 font-bold  flex  gap-5 flex-row items-center justify-center",children:[e(M,{size:"1.5em",color:"#121212"}),e("a",{href:"/",children:"Home"})]}),l("li",{className:"p-2 flex gap-5  break-all flex-row items-center justify-center",children:[e(U,{size:"1.5em"}),e(v,{to:"/profile",children:"Profile"})]}),l("li",{className:"p-2   flex  break-all gap-5 flex-row items-center justify-center",children:[e(F,{size:"1.5em"}),e(v,{to:"/messages",children:"Messages"})]})]})})})}const R=r.exports.lazy(()=>b(()=>import("./UserList.7ec6285e.js"),["assets/UserList.7ec6285e.js","assets/index.98e253f8.js","assets/index.190101e0.css"])),q=()=>{const[a,t]=r.exports.useTransition(),[s,m]=r.exports.useState([]),n="SINGLE USER KEY",d=P();return N([n,d._id],I,{refetchOnWindowFocus:!1,onSuccess:i=>{t(()=>{m(i.data)})}}),e("aside",{className:"w-[250px] lg:sticky lg:top-[80px]  flex-1 lg:flex-none   flex flex-col gap-3 items-start justify-start  md:items-center   lg:min-h-[80vh] min-h-auto my-10 lg:my-1  mx-2 ",children:l("div",{className:"w-full shadow-box	rounded-md py-2 bg-white  flex flex-col justify-start  flex-wrap items-center min-h-[300px]",children:[e("div",{className:"w-full py-5 max-w-full lg:max-w-[70%]  flex flex-col flex-wrap items-center  justify-center gap-3 ",children:e("h1",{className:"font-bold text-gray-900 text-center text-sm md:text-left   sm:text-sm md:text-md lg:text-lg ",children:"Followers"})}),e(S,{children:s==null?void 0:s.map(i=>e("div",{className:"flex flex-row w-full  min-h-[50px] py-1 justify-center max-w-[70%]  items-center",children:e("div",{className:"w-full  flex flex-row items-center 	justify-center flex-wrap ",children:e(R,{user:i},i._id)})},i._id))})]})})},H=r.exports.lazy(()=>b(()=>import("./Post.489db13a.js"),["assets/Post.489db13a.js","assets/index.98e253f8.js","assets/index.190101e0.css","assets/PostIcons.51df312a.js","assets/PostApi.782cad32.js","assets/Button.769d98f0.js","assets/index.esm.73f68d62.js","assets/SuspenseWrapper.28cf0a96.js"])),O=()=>{const[a,t]=r.exports.useState([]);return r.exports.useTransition(),N(["posts"],z,{onSuccess:s=>{t(s)},onSettled:()=>{t(s=>s)}}),e("div",{className:"flex items-center justify-center flex-wrap w-full flex-col ",children:e(S,{children:a.map(s=>e(H,{post:s},s._id))})})};var V=u.GenIcon,W=function(t){return V({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"}},{tag:"polyline",attr:{points:"21 15 16 10 5 21"}}]})(t)};const $=()=>{const{register:a,reset:t,handleSubmit:s}=E(),[m,n]=r.exports.useState(""),{mutate:d}=B(C),[i,p]=r.exports.useState(""),[h,g]=r.exports.useState("");function j(f){const o=f.target.files[0];if(o!=null&&o.type.match("image.*")){new A(o,{convertSize:100,quality:.6,success:c=>{p(c)}});const w=new FileReader;w.onload=function(c){var y;g((y=c==null?void 0:c.target)==null?void 0:y.result)},w.readAsDataURL(o),r.exports.startTransition(()=>{n("")})}else n("File should be only image and not other file types")}function _(f){const x=new FormData;f.textarea===""?n("Write some text or  upload an image  to create a post"):(x.append("text",f.textarea),x.append("image",i),d(x,{onSuccess:()=>{L.invalidateQueries(["posts"])}}),r.exports.startTransition(()=>{g(""),p(""),t()}))}return l("div",{className:"w-full min-h-[100px] flex flex-col items-center justify-center  flex-wrap  bg-white rounded-lg border gap-2 border-[#F5F7F9] shadow-md   ",children:[l("div",{className:"w-full  flex-wrap flex text-center  gap-1 flex-row items-center lg:justify-between ",children:[l("div",{className:"flex md:w-auto w-full flex-1  items-center justify-between  flex-wrap flex-row",children:[e("input",{...a("textarea"),className:"flex w-[200px] md:w-32   break-all text-ellipsis md:mx-1 mx-2 items-center   md:flex-1  flex-initial font-bold py-3  my-2  px-1  resize-none self-center  ",placeholder:"Write Something"}),l("label",{className:"bg-zinc-900  my-1 p-3 text-white font-inter hover:bg-primary cursor-pointer focus:ring-primary gap-2 focus:ring-opacity-50 flex flex-row flex-wrap items-center justify-center  mx-1  rounded-lg  md:flex-initial",htmlFor:"upload",children:[e("h4",{children:"Photo"}),e(W,{})]})]}),e("input",{type:"file",name:"upload",id:"upload",title:" ",onChange:j,accept:"image/x-png,image/gif,image/jpeg",hidden:!0})]}),e("div",{className:"w-full flex flex-col flex-wrap items-center justify-center",children:h?e("img",{decoding:"async",src:h,alt:"Selected Media"}):""}),m&&e("h1",{className:"text-sm text-gray-700",children:m}),e("div",{className:"flex w-full bg-deepBlue flex-row items-center justify-center flex-wrap",children:e(k,{type:"button",onClick:s(_),bgColor:"transparent",margin:"1",title:"Post it",size:"fluid",textColor:"white",rounded:"sm",hover:"purple-700"})})]})},K=()=>l("section",{className:"w-[450px]    flex flex-col justify-start items-center  my-1 min-h-[80vh] flex-wrap  gap-2 mx-2",children:[e($,{}),e(O,{})]}),te=()=>e("main",{className:"w-full min-h-[80vh]  gap-2 flex  flex-1 lg:flex-none flex-row justify-start flex-wrap items-center",children:l("div",{className:"container mx-auto lg:gap-2  gap-1  flex flex-row items-start xl:mt-5  justify-evenly   flex-wrap",children:[e(D,{}),e(K,{}),e(q,{})]})});export{te as default};
