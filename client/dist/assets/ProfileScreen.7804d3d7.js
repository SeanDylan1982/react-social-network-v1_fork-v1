import{m as y,b as d,a as t,j as e,t as b,q as N,D as v,u as C,O as j}from"./index.98e253f8.js";import{B as f}from"./Button.769d98f0.js";import{M as P}from"./PostIcons.51df312a.js";import{C as S}from"./compressor.esm.c4e5fc50.js";import{u as k,a as E}from"./index.esm.73f68d62.js";import O from"./CustomPost.ce775ee8.js";import{u as D}from"./useSingleUser.b9c1bbc8.js";import"./PostApi.782cad32.js";import"./Comment.9ad7de9d.js";const A=()=>{const i=y(),[n,r]=d.exports.useState(!0),[o,a]=d.exports.useState(""),m=()=>{r(!1)},{register:c,handleSubmit:u}=k(),p=l=>{if(l.target.files){l.preventDefault();const s=l.target.files[0];new S(s,{quality:.6,success:w=>{a(w)}})}},x=E(v,{onSuccess:l=>{const s=JSON.parse(localStorage.getItem("userDetails")||"{}");s.avatar=l.avatar,s.username=l.username,s.email=l.email,i(b(s)),localStorage.setItem("userDetails",JSON.stringify(s)),N.invalidateQueries()}}),h=l=>{if(l.username||l.email||o){const s=new FormData;l.username&&s.append("username",l.username),l.email&&s.append("email",l.email),o&&s.append("avatar",o),x.mutate(s),r(!1)}},g=()=>{r(!n)};return t(P,{open:n,onClose:m,children:[e("h1",{children:"Edit Profile"}),t("form",{className:"w-full flex flex-col items-start justify-center flex-wrap gap-3",children:[e("label",{className:"block text-gray-700 text-sm font-bold mb-1",children:"Username"}),e("input",{...c("username",{}),className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",id:"username",type:"text",placeholder:"Your Username"}),e("label",{className:"block text-gray-700 text-sm font-bold mb-1",children:"Email"}),e("input",{...c("email",{}),className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",id:"email",type:"email",placeholder:"Your Email"}),e("label",{className:"block text-gray-700 text-sm font-bold mb-1",children:"Avatar"}),e("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-grey-darker",id:"file",onChange:p,type:"file",placeholder:"Your Avatar"}),t("div",{className:"w-full flex flex-row py-3 items-end justify-end flex-wrap gap-1",children:[e(f,{margin:1.5,bgColor:"white",size:"sm",borderColor:"gray-300",textColor:"gray-700",rounded:"md",title:"Cancel",type:"button",onClick:g,children:"Cancel"}),e(f,{title:"Submit",size:"sm",textColor:"white",rounded:"md",bgColor:"bg-deepBlue",margin:1,onClick:u(h)})]})]})]})},Q=()=>{const[i,n]=d.exports.useState(!1),r=C(),o=r==null?void 0:r._id,{data:a,error:m}=D(o);return a?e("section",{className:"w-full min-h-[80vh]  items-center flex-wrap flex-col justify-center",children:t("div",{className:"lg:max-w-4xl max-w-full mx-auto flex items-center justify-center flex-col",children:[t("div",{className:"flex my-3 py-2   w-full flex-row flex-wrap items-center justify-center gap-3 min-h-[50px] text-slate-900",children:[e("div",{className:"self-center",children:e("img",{decoding:"async",className:"mx-2 my-1 object-center object-cover  p-2 w-32 h-32 rounded-full",alt:"profile",src:a.avatar})}),t("div",{className:"flex flex-col items-center justify-center gap-3 ",children:[t("div",{className:"flex items-center w-full flex-wrap md:justify-start justify-center  gap-3",children:[e("h1",{className:"font-bold text-lg",children:a.username}),e(f,{margin:"1",size:"xs",bgColor:"bg-deepBlue",textColor:"white",title:"Edit Profile",onClick:()=>n(!i),children:"Edit Profile"})]}),t("div",{className:"flex flex-row items-center justify-center gap-3 flex-wrap",children:[t("h1",{className:"text-black",children:[t("b",{className:"text-slate-900",children:[" ",a.followers.length]})," ","Followers"]}),t("h1",{children:[t("b",{className:"text-slate-900",children:[" ",a.following.length]})," ","Following"]}),t("h1",{children:[t("b",{className:"text-slate-900",children:[" ",a.posts.length]})," Posts"]})]}),e("div",{className:"flex md:self-start self-center",children:e("p",{className:"font-normal text-sm text-black opacity-80",children:"Profile Bio \u{1F680}"})})]})]}),t("div",{className:"w-full flex items-center justify-center flex-col",children:[e("h1",{className:"text-2xl py-2 text-slate-900 font-bold",children:a.posts.length!==0?"Your Posts":"No Posts"}),e("div",{className:"w-full my-5  flex-wrap gap-5 flex flex-row items-center justify-center",children:t("div",{className:"w-full   flex items-center justify-center  max-w-full flex-row flex-wrap gap-3 ",children:[a.posts.map(c=>e(O,{post:c})),i&&e(A,{})]})})]})]})}):m?e("h1",{children:"Something went wrong"}):e(j,{})};export{Q as default};
